import{ae as m,u as d,d as l,j as s}from"./main-amE6mPDm.js";import{u as x}from"./useQuery-DdeLzvk4.js";import{u as p}from"./useMutation-BBcAv7H8.js";import{a as c}from"./api-client-CoYXQ-f4.js";function j(){var o,a;const{courseId:t}=m.useParams(),{token:r}=d(),n=l(),u=x({queryKey:["progress",t],queryFn:async()=>(await c.getCourseProgress(r||"",t)).data,enabled:!!r}),i=p({mutationFn:async e=>c.completeLecture(r||"",{course_id:t,lecture_id:e,watch_time_seconds:60}),onSuccess:()=>n.invalidateQueries({queryKey:["progress",t]})});return s.jsxs("div",{className:"p-4 max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Course Progress"}),s.jsx("ul",{className:"divide-y bg-white border rounded",children:(a=(o=u.data)==null?void 0:o.lecture_progress)==null?void 0:a.map(e=>s.jsxs("li",{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[e.order_number,". ",e.title]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[Math.round(e.progress_percentage||0),"% â€¢ ",e.watch_time_seconds,"s"]})]}),!e.is_completed&&s.jsx("button",{className:"text-blue-600",onClick:()=>i.mutate(e.lecture_id),children:"Mark Complete"})]},e.lecture_id))})]})}export{j as component};
