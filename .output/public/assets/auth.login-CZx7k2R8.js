import{n as c,u,O as p,j as s,L as g}from"./main-amE6mPDm.js";import{u as x}from"./useMutation-BBcAv7H8.js";import{a as h}from"./api-client-CoYXQ-f4.js";function N(){const o=c(),{login:r}=u(),[n,i]=p.useState(null),a=x({mutationFn:e=>h.login(e),onSuccess:e=>{const t=e.data;r(t.user,t.token),o({to:"/courses/"})},onError:e=>i((e==null?void 0:e.message)||"Login failed")}),l=e=>{e.preventDefault();const t=new FormData(e.currentTarget),m=String(t.get("email")||""),d=String(t.get("password")||"");a.mutate({email:m,password:d})};return s.jsxs("div",{className:"p-4 max-w-md mx-auto",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Login"}),s.jsxs("form",{className:"flex flex-col gap-3",onSubmit:l,children:[s.jsx("input",{name:"email",type:"email",placeholder:"Email",className:"border rounded p-2",required:!0}),s.jsx("input",{name:"password",type:"password",placeholder:"Password",className:"border rounded p-2",required:!0}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50",disabled:a.isPending,children:a.isPending?"Logging in...":"Login"}),n&&s.jsx("p",{className:"text-sm text-red-600",children:n})]}),s.jsxs("p",{className:"text-sm mt-3",children:["No account?"," ",s.jsx(g,{to:"/auth/register",className:"text-blue-600 underline",children:"Register"})]})]})}export{N as component};
