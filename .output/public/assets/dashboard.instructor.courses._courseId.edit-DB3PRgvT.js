import{ag as o,u as c,j as e}from"./main-amE6mPDm.js";import{u as m}from"./useQuery-DdeLzvk4.js";import{u as p}from"./useMutation-BBcAv7H8.js";import{a as u}from"./api-client-CoYXQ-f4.js";import{I as x}from"./InstructorGuard-2KiUKDdY.js";function v(){const{courseId:s}=o.useParams(),{token:d}=c(),t=m({queryKey:["course",s],queryFn:async()=>(await u.getCourse(s)).data}),n=p({mutationFn:async r=>u.updateCourse(d||"",s,r),onSuccess:()=>t.refetch()});if(!t.data)return e.jsx("div",{className:"p-4",children:"Loading..."});const i=r=>{r.preventDefault();const a=new FormData(r.currentTarget),l={title:String(a.get("title")||""),description:String(a.get("description")||""),category:String(a.get("category")||""),level:String(a.get("level")||""),price:Number(a.get("price")||"0"),currency:"USD",thumbnail_url:String(a.get("thumbnail_url")||""),status:String(a.get("status")||"draft")};n.mutate(l)};return e.jsx(x,{children:e.jsxs("div",{className:"p-4 max-w-xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Edit Course"}),e.jsxs("form",{className:"flex flex-col gap-3",onSubmit:i,children:[e.jsx("input",{name:"title",defaultValue:t.data.title,className:"border p-2 rounded"}),e.jsx("textarea",{name:"description",defaultValue:t.data.description,className:"border p-2 rounded"}),e.jsx("input",{name:"category",defaultValue:t.data.category,className:"border p-2 rounded"}),e.jsxs("select",{name:"level",defaultValue:t.data.level,className:"border p-2 rounded",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]}),e.jsx("input",{name:"price",type:"number",step:"0.01",defaultValue:t.data.price,className:"border p-2 rounded"}),e.jsx("input",{name:"thumbnail_url",defaultValue:t.data.thumbnail_url,className:"border p-2 rounded"}),e.jsxs("select",{name:"status",defaultValue:t.data.status,className:"border p-2 rounded",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded self-start",disabled:n.isPending,children:n.isPending?"Saving...":"Save"})]})]})})}export{v as component};
