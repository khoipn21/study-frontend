import{u as x,d as b,j as t}from"./main-amE6mPDm.js";import{u as g}from"./useQuery-DdeLzvk4.js";import{u as h}from"./useMutation-BBcAv7H8.js";import{a as r}from"./api-client-CoYXQ-f4.js";function _(){var a;const{token:n}=x(),l=b(),o=g({queryKey:["billing","subscriptions"],queryFn:async()=>{var e;return((e=await r.listSubscriptions(n||""))==null?void 0:e.subscriptions)??[]},enabled:!!n}),i=h({mutationFn:async e=>r.createSubscription(n||"",e),onSuccess:()=>l.invalidateQueries({queryKey:["billing","subscriptions"]})}),c=e=>{e.preventDefault();const s=new FormData(e.currentTarget),d=String(s.get("payment_method_id")||""),u=String(s.get("plan_name")||"pro"),m=String(s.get("billing_period")||"monthly"),p=Number(s.get("price")||"0");i.mutate({payment_method_id:d,plan_name:u,billing_period:m,price:p}),e.currentTarget.reset()};return t.jsxs("div",{className:"p-4 max-w-3xl mx-auto",children:[t.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Subscriptions"}),t.jsxs("form",{onSubmit:c,className:"flex flex-col gap-2 mb-4",children:[t.jsx("input",{name:"payment_method_id",placeholder:"Payment Method ID",className:"border p-2 rounded",required:!0}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{name:"plan_name",placeholder:"Plan name",className:"border p-2 rounded",defaultValue:"pro"}),t.jsx("input",{name:"billing_period",placeholder:"Billing (monthly/yearly)",className:"border p-2 rounded",defaultValue:"monthly"})]}),t.jsx("input",{name:"price",placeholder:"Price",className:"border p-2 rounded",defaultValue:"9.99"}),t.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded self-start",disabled:i.isPending,children:i.isPending?"Subscribing...":"Create Subscription"})]}),t.jsx("ul",{className:"divide-y bg-white border rounded",children:(a=o.data)==null?void 0:a.map(e=>t.jsxs("li",{className:"p-3 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium",children:[e.plan_name," • ",e.status]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["Next: ",e.next_billing_date]})]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[e.billing_period," • ",e.price]})]},e.id))})]})}export{_ as component};
