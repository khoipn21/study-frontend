var Y=Object.defineProperty;var J=(r,t,s)=>t in r?Y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var $=(r,t,s)=>J(r,typeof t!="symbol"?t+"":t,s);import{c as A,j as e,b as w,U as G,f as W,B as m,r as d,a as F,S as Q,I as X,D as ee,p as se,q as te,s as B}from"./main-amE6mPDm.js";import{T as re}from"./textarea-DpBpWtX7.js";import{B as T,T as ae}from"./trash-2-D-FHT-5d.js";import{T as ne,a as oe}from"./thumbs-up-gXuOjcks.js";import{P as ie}from"./play-Bsqp6nLS.js";import{M as H}from"./message-square-BFr9fZWG.js";import{L as O}from"./loader-circle-D5w-Lebd.js";import{S as ce}from"./send-mopWIPjK.js";import{P as L}from"./plus-DxPzQ3h9.js";import{C as le}from"./clock-DsV4s8UB.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],z=A("Copy",de);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],q=A("EllipsisVertical",ue);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],me=A("ExternalLink",he);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],xe=A("PenLine",pe);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ge=A("Sparkles",fe);function ye({message:r,onCopy:t,onFeedback:s,onSuggestionClick:n}){var C,N,h;const l=r.role==="user",p=r.role==="assistant",b=r.role==="system",g=()=>{navigator.clipboard.writeText(r.content),t==null||t(r.content)},y=a=>a.split(`
`).map((i,c)=>{if(i.startsWith("```"))return null;if(i.startsWith("• "))return e.jsx("li",{className:"ml-4 list-disc",children:i.substring(2)},c);if(i.includes("**")){const u=i.split("**");return e.jsx("p",{className:"mb-2",children:u.map((D,E)=>E%2===1?e.jsx("strong",{children:D},E):D)},c)}return i.trim()?e.jsx("p",{className:"mb-2",children:i},c):e.jsx("br",{},c)}).filter(Boolean),j=a=>{const i=/```(\w+)?\n([\s\S]*?)```/g,c=[];let u;for(;(u=i.exec(a))!==null;)c.push({language:u[1]||"text",code:u[2].trim()});return c},k=r.content.replace(/```(\w+)?\n([\s\S]*?)```/g,"[CODE_BLOCK]"),f=j(r.content);let S=0;return b?e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("div",{className:"px-3 py-1 bg-muted rounded-full text-xs text-muted-foreground",children:r.content})}):e.jsxs("div",{className:w("flex gap-3 p-4",l&&"flex-row-reverse bg-muted/30",p&&"bg-background"),children:[e.jsx("div",{className:w("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",l&&"bg-primary text-primary-foreground",p&&"bg-secondary text-secondary-foreground"),children:l?e.jsx(G,{className:"h-4 w-4"}):e.jsx(T,{className:"h-4 w-4"})}),e.jsxs("div",{className:w("flex-1 space-y-2",l&&"text-right"),children:[e.jsx("div",{className:w("inline-block max-w-[80%] rounded-lg px-4 py-2",l&&"bg-primary text-primary-foreground ml-auto",p&&"bg-card border"),children:e.jsx("div",{className:"prose prose-sm max-w-none",children:y(k).map((a,i)=>{if(a==="[CODE_BLOCK]"&&f[S]){const c=f[S++];return e.jsxs("div",{className:"my-3",children:[e.jsxs("div",{className:"flex items-center justify-between bg-muted px-3 py-1 rounded-t-lg",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:c.language}),e.jsx(m,{size:"sm",variant:"ghost",onClick:()=>navigator.clipboard.writeText(c.code),className:"h-6 w-6 p-0",children:e.jsx(z,{className:"h-3 w-3"})})]}),e.jsx("pre",{className:"bg-muted/50 p-3 rounded-b-lg overflow-x-auto",children:e.jsx("code",{className:"text-sm",children:c.code})})]},i)}return a})})}),e.jsxs("div",{className:w("flex items-center gap-2 text-xs text-muted-foreground",l&&"justify-end"),children:[e.jsx("span",{children:W(new Date(r.timestamp))}),p&&((C=r.metadata)==null?void 0:C.confidence)&&e.jsxs("span",{className:"px-2 py-1 bg-muted rounded",children:[Math.round(r.metadata.confidence*100),"% confident"]})]}),p&&((N=r.metadata)==null?void 0:N.sources)&&r.metadata.sources.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Sources:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.metadata.sources.map((a,i)=>e.jsxs("a",{href:a.url,className:"inline-flex items-center gap-1 px-2 py-1 bg-muted rounded text-xs hover:bg-muted/80 transition-colors",children:[e.jsx(me,{className:"h-3 w-3"}),e.jsx("span",{children:a.title})]},i))})]}),p&&((h=r.metadata)==null?void 0:h.suggestions)&&r.metadata.suggestions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Ask me:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.metadata.suggestions.map((a,i)=>e.jsx("button",{onClick:()=>n==null?void 0:n(a),className:"px-3 py-1 bg-secondary text-secondary-foreground rounded-full text-xs hover:bg-secondary/80 transition-colors",children:a},i))})]}),!l&&e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsxs(m,{size:"sm",variant:"ghost",onClick:g,className:"h-6 px-2 text-xs",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Copy"]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"sm",variant:"ghost",onClick:()=>s(r.id,"up"),className:"h-6 px-2 text-xs",children:e.jsx(ne,{className:"h-3 w-3"})}),e.jsx(m,{size:"sm",variant:"ghost",onClick:()=>s(r.id,"down"),className:"h-6 px-2 text-xs",children:e.jsx(oe,{className:"h-3 w-3"})})]})]})]})]})}const I=class I{static getInstance(){return I.instance||(I.instance=new I),I.instance}constructor(){}async sendMessage(t){try{const s=await fetch("/api/v1/ai-chat/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to send message");return(await s.json()).message}catch(s){return console.error("Error sending message:",s),this.getMockResponse(t.message,t.context)}}async getSessions(t){try{const s=new URLSearchParams;t&&s.append("courseId",t);const n=await fetch(`/api/v1/ai-chat/sessions?${s}`);if(!n.ok)throw new Error("Failed to fetch sessions");return await n.json()}catch(s){return console.error("Error fetching sessions:",s),this.getMockSessions(t)}}async getSession(t){try{const s=await fetch(`/api/v1/ai-chat/sessions/${t}`);if(!s.ok)throw new Error("Failed to fetch session");return await s.json()}catch(s){return console.error("Error fetching session:",s),this.getMockSession(t)}}async createSession(t){try{const s=await fetch("/api/v1/ai-chat/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:t})});if(!s.ok)throw new Error("Failed to create session");return await s.json()}catch(s){return console.error("Error creating session:",s),this.createMockSession(t)}}async deleteSession(t){try{if(!(await fetch(`/api/v1/ai-chat/sessions/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete session")}catch(s){console.error("Error deleting session:",s)}}async updateSessionTitle(t,s){try{if(!(await fetch(`/api/v1/ai-chat/sessions/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:s})})).ok)throw new Error("Failed to update session title")}catch(n){console.error("Error updating session title:",n)}}async getCourseSuggestions(t){try{const s=await fetch(`/api/v1/ai-chat/suggestions/course/${t}`);if(!s.ok)throw new Error("Failed to fetch suggestions");return(await s.json()).suggestions}catch(s){return console.error("Error fetching course suggestions:",s),this.getMockSuggestions(t)}}async getLectureSuggestions(t){try{const s=await fetch(`/api/v1/ai-chat/suggestions/lecture/${t}`);if(!s.ok)throw new Error("Failed to fetch suggestions");return(await s.json()).suggestions}catch(s){return console.error("Error fetching lecture suggestions:",s),this.getMockSuggestions("lecture")}}getMockResponse(t,s){const n=["I understand you're asking about this topic. Let me help break it down for you.","That's a great question! Here's what I can tell you about this concept:","Based on your current course progress, here's some additional context that might help:","Let me provide some examples to illustrate this point better:","I see you're working through this challenge. Here are some approaches you could try:"],l=s!=null&&s.courseId?[{title:"Course Lecture 3: Key Concepts",url:`/courses/${s.courseId}/lectures/3`,type:"lecture"},{title:"Related Forum Discussion",url:"/forum/posts/123",type:"forum"}]:[],p=["Can you explain this concept with more examples?","What are the common pitfalls to avoid here?","How does this relate to other topics in the course?"];return{id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,content:`${n[Math.floor(Math.random()*n.length)]}

${this.generateContextualResponse(t,s)}`,role:"assistant",timestamp:new Date().toISOString(),courseId:s==null?void 0:s.courseId,lectureId:s==null?void 0:s.lectureId,metadata:{sources:l,confidence:.85+Math.random()*.15,suggestions:p}}}generateContextualResponse(t,s){const n=t.toLowerCase();return n.includes("explain")||n.includes("what is")?`This concept is fundamental to understanding the broader topic. Here are the key points:

• **Definition**: The core principle involves...
• **Application**: You'll typically use this when...
• **Best Practices**: Remember to always...`:n.includes("example")||n.includes("show me")?`Here's a practical example:

\`\`\`javascript
function example() {
  // This demonstrates the concept
  return 'Hello, World!'
}
\`\`\`

This example shows how to...`:n.includes("error")||n.includes("problem")||n.includes("bug")?`Let's troubleshoot this step by step:

1. **Check the basics**: Ensure you have...
2. **Common causes**: This issue often happens when...
3. **Solution**: Try this approach...

If you're still having issues, can you share your code?`:n.includes("difference")||n.includes("vs")||n.includes("compare")?`Great question! Here's a comparison:

**Option A**:
• Pros: Fast, simple, widely supported
• Cons: Limited flexibility
• Use when: You need quick results

**Option B**:
• Pros: More flexible, powerful features
• Cons: Steeper learning curve
• Use when: You need advanced functionality`:"I'd be happy to help you understand this better. Could you provide more specific details about what you'd like to know?"}getMockSessions(t){const s=[{id:"session_1",title:"Understanding React Hooks",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T11:45:00Z",courseId:"react-course",messages:[]},{id:"session_2",title:"JavaScript Array Methods",createdAt:"2024-01-14T14:20:00Z",updatedAt:"2024-01-14T15:30:00Z",courseId:"js-fundamentals",messages:[]},{id:"session_3",title:"General Programming Questions",createdAt:"2024-01-13T09:15:00Z",updatedAt:"2024-01-13T09:45:00Z",messages:[]}];return t?s.filter(n=>n.courseId===t):s}getMockSession(t){const n=this.getMockSessions().find(l=>l.id===t);return n?{...n,messages:[{id:"msg_1",content:"Hello! How can I help you today?",role:"assistant",timestamp:n.createdAt},{id:"msg_2",content:"I have a question about React hooks",role:"user",timestamp:"2024-01-15T10:35:00Z"},{id:"msg_3",content:"React hooks are functions that let you use state and other React features in functional components. The most commonly used hooks are useState and useEffect. Would you like me to explain how they work?",role:"assistant",timestamp:"2024-01-15T10:36:00Z",metadata:{confidence:.92,sources:[{title:"React Hooks Documentation",url:"https://reactjs.org/docs/hooks-intro.html",type:"documentation"}],suggestions:["Can you show me examples of useState?","How do I use useEffect?","What are the rules of hooks?"]}}]}:null}createMockSession(t){const s=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=new Date().toISOString();return{id:s,title:"New Chat Session",messages:[{id:`msg_${Date.now()}`,content:t!=null&&t.courseId?"Hello! I'm here to help you with your course. What would you like to know?":"Hello! I'm your AI tutor. How can I assist you today?",role:"assistant",timestamp:n,courseId:t==null?void 0:t.courseId,lectureId:t==null?void 0:t.lectureId}],createdAt:n,updatedAt:n,courseId:t==null?void 0:t.courseId,lectureId:t==null?void 0:t.lectureId}}getMockSuggestions(t){const s={"react-course":["How do React hooks work?","What is the difference between props and state?","How do I handle forms in React?","Can you explain the component lifecycle?"],"js-fundamentals":["What are arrow functions?","How do promises work?","Explain async/await","What is the difference between let, const, and var?"],lecture:["Can you summarize this lecture?","What are the key takeaways?","I need help with the practice exercises","How does this relate to previous topics?"],default:["Help me understand this concept","Can you provide more examples?","What should I study next?","I'm having trouble with..."]};return s[t]||s.default}};$(I,"instance");let P=I;const v=P.getInstance();function we({context:r,className:t,embedded:s=!1,height:n="h-96"}){const[l,p]=d.useState(null),[b,g]=d.useState([]),[y,j]=d.useState(""),[k,f]=d.useState(!1),[S,C]=d.useState([]),N=d.useRef(null),h=d.useRef(null);d.useEffect(()=>{i()},[r]),d.useEffect(()=>{a()},[b]),d.useEffect(()=>{c()},[r]);const a=()=>{var o;(o=N.current)==null||o.scrollIntoView({behavior:"smooth"})},i=async()=>{try{const o=await v.createSession(r);p(o),g(o.messages)}catch(o){console.error("Error initializing chat:",o)}},c=async()=>{if(r)try{let o=[];r.courseId?o=await v.getCourseSuggestions(r.courseId):r.lectureId&&(o=await v.getLectureSuggestions(r.lectureId)),C(o)}catch(o){console.error("Error loading suggestions:",o)}},u=async o=>{const x=o||y.trim();if(!x||!l)return;const R={id:`msg_${Date.now()}_user`,content:x,role:"user",timestamp:new Date().toISOString(),courseId:r==null?void 0:r.courseId,lectureId:r==null?void 0:r.lectureId};g(M=>[...M,R]),j(""),f(!0);try{const M=await v.sendMessage({message:x,context:r,sessionId:l.id});g(_=>[..._,M])}catch(M){console.error("Error sending message:",M);const _={id:`msg_${Date.now()}_error`,content:"Sorry, I encountered an error. Please try again.",role:"assistant",timestamp:new Date().toISOString()};g(K=>[...K,_])}finally{f(!1)}},D=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),u())},E=o=>{var x;j(o),(x=h.current)==null||x.focus()},U=()=>{},Z=(o,x)=>{console.log(`Feedback for ${o}: ${x}`)},V=[{icon:F,label:"Explain this topic",action:()=>u("Can you explain this topic in detail?")},{icon:ie,label:"Show examples",action:()=>u("Can you show me some practical examples?")},{icon:H,label:"Ask a question",action:()=>{var o;return(o=h.current)==null?void 0:o.focus()}}];return e.jsxs("div",{className:w("flex flex-col bg-background border rounded-lg",s?"shadow-sm":"shadow-lg",t),children:[!s&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-card",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"AI Tutor"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r!=null&&r.courseId?"Course Assistant":r!=null&&r.lectureId?"Lecture Helper":"General Study Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-success rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Online"})]})]}),e.jsxs("div",{className:w("flex-1 overflow-y-auto",n,s&&"min-h-0"),children:[b.length<=1&&e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ge,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:r!=null&&r.courseId?"Course AI Assistant":"AI Tutor Ready to Help"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto",children:"I'm here to help you understand concepts, answer questions, and guide your learning journey. Ask me anything!"})]}),!s&&e.jsx("div",{className:"flex flex-wrap gap-2 justify-center pt-4",children:V.map((o,x)=>{const R=o.icon;return e.jsxs(m,{variant:"outline",size:"sm",onClick:o.action,className:"gap-2",children:[e.jsx(R,{className:"h-3 w-3"}),o.label]},x)})}),S.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Popular questions:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:S.slice(0,4).map((o,x)=>e.jsx("button",{onClick:()=>E(o),className:"px-3 py-2 bg-muted hover:bg-muted/80 rounded-lg text-sm transition-colors text-left max-w-48",children:o},x))})]})]}),b.map(o=>e.jsx(ye,{message:o,onCopy:U,onFeedback:Z,onSuggestionClick:E},o.id)),k&&e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-secondary text-secondary-foreground flex items-center justify-center",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(O,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Thinking..."})]})]}),e.jsx("div",{ref:N})]}),e.jsxs("div",{className:"p-4 border-t bg-card",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(re,{ref:h,placeholder:"Ask me anything about your studies...",value:y,onChange:o=>j(o.target.value),onKeyDown:D,rows:1,className:"min-h-[40px] max-h-32 resize-none pr-12"}),e.jsx("div",{className:"absolute right-2 bottom-2 text-xs text-muted-foreground",children:y.length>0&&e.jsxs("span",{children:[y.length,"/2000"]})})]}),e.jsx(m,{onClick:()=>u(),disabled:!y.trim()||k,className:"h-10 w-10 p-0",children:k?e.jsx(O,{className:"h-4 w-4 animate-spin"}):e.jsx(ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"Press Enter to send, Shift+Enter for new line"}),r&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1 h-1 bg-primary rounded-full"}),"Context-aware responses"]})]})]})]})}function Ae(){const[r,t]=d.useState([]),[s,n]=d.useState(null),[l,p]=d.useState(""),[b,g]=d.useState(!0),[y,j]=d.useState(!0);d.useEffect(()=>{k()},[]);const k=async()=>{g(!0);try{const a=await v.getSessions();t(a),a.length>0&&!s&&n(a[0].id)}catch(a){console.error("Error loading sessions:",a)}finally{g(!1)}},f=async()=>{try{const a=await v.createSession();t(i=>[a,...i]),n(a.id)}catch(a){console.error("Error creating new session:",a)}},S=async a=>{try{if(await v.deleteSession(a),t(i=>i.filter(c=>c.id!==a)),s===a){const i=r.filter(c=>c.id!==a);n(i.length>0?i[0].id:null)}}catch(i){console.error("Error deleting session:",i)}},C=async(a,i)=>{try{await v.updateSessionTitle(a,i),t(c=>c.map(u=>u.id===a?{...u,title:i}:u))}catch(c){console.error("Error updating session title:",c)}},N=r.filter(a=>a.title.toLowerCase().includes(l.toLowerCase())),h=r.find(a=>a.id===s);return e.jsxs("div",{className:"h-screen bg-background flex overflow-hidden",children:[e.jsxs("div",{className:w("w-80 border-r bg-card flex flex-col transition-all duration-300",!y&&"w-0 overflow-hidden"),children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-xl font-semibold",children:"AI Tutor"})]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>j(!1),className:"md:hidden",children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsxs(m,{onClick:f,className:"w-full gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"New Chat"]})]}),e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(X,{placeholder:"Search conversations...",value:l,onChange:a=>p(a.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:b?e.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((a,i)=>e.jsx("div",{className:"h-16 bg-muted rounded-lg animate-pulse"},i))}):N.length>0?e.jsx("div",{className:"p-2 space-y-1",children:N.map(a=>e.jsxs("div",{className:w("group flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:bg-muted transition-colors",s===a.id&&"bg-muted"),onClick:()=>n(a.id),children:[e.jsx("div",{className:"flex-shrink-0",children:a.courseId?e.jsx(F,{className:"h-4 w-4 text-primary"}):e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:a.title}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(le,{className:"h-3 w-3"}),e.jsx("span",{children:W(new Date(a.updatedAt))})]})]}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 h-6 w-6 p-0",onClick:i=>i.stopPropagation(),children:e.jsx(q,{className:"h-3 w-3"})})}),e.jsxs(te,{align:"end",children:[e.jsxs(B,{onClick:i=>{i.stopPropagation();const c=prompt("Enter new title:",a.title);c&&c!==a.title&&C(a.id,c)},children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Rename"]}),e.jsxs(B,{onClick:i=>{i.stopPropagation(),confirm("Are you sure you want to delete this conversation?")&&S(a.id)},className:"text-destructive",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]},a.id))}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(H,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No conversations"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:l?"No conversations match your search":"Start a new conversation with your AI tutor"}),!l&&e.jsxs(m,{onClick:f,size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Start Chatting"]})]})}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{children:"AI responses are generated and may contain errors."}),e.jsx("p",{children:"Always verify important information."})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b bg-card",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>j(!0),children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx("h2",{className:"font-semibold truncate",children:(h==null?void 0:h.title)||"Select a conversation"}),e.jsx(m,{variant:"ghost",size:"sm",onClick:f,children:e.jsx(L,{className:"h-4 w-4"})})]}),s&&h?e.jsx("div",{className:"flex-1",children:e.jsx(we,{context:{courseId:h.courseId,lectureId:h.lectureId},height:"h-full",className:"h-full border-0 rounded-none"})}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:e.jsxs("div",{className:"text-center space-y-4 max-w-md mx-auto p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(T,{className:"h-8 w-8 text-primary"})}),e.jsx("h2",{className:"text-2xl font-semibold",children:"Welcome to AI Tutor"}),e.jsx("p",{className:"text-muted-foreground",children:"Your personal AI assistant for learning. Ask questions, get explanations, and receive help with your studies anytime."}),e.jsxs(m,{onClick:f,className:"gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Start Your First Conversation"]})]})})]})]})}export{Ae as component};
